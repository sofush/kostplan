@startuml
scale 1920*1080
skinparam classAttributeIconSize 0
enum Role {
	USER
	ADMIN
	CHEF
}
class User {
	- username: String
	- password: String
	- role: Role
	- name: String
	- male: boolean
	- weight: int
	- dob: LocalDate
	- height: int
	{method} + ... constructor/getter/setter
	+ List<String> getAuthorities()
	+ int calculateBMR()
}
class Day {
	- date: LocalDate
	- username: String
	- breakfast: Recipe
	- lunch: Recipe
	- dinner: Recipe
	{method} + ... constructor/getter/setter
}
class Recipe {
	- id: Integer
	- week: int
	- title: String
	- description: String
	- nutrition_info: String
	- ingredients: List<Ingredient>
	- instructions: String
	- time: String
	{method} + ... constructor/getter/setter
	+ int sumCalories()
}
class Ingredient {
	- id: int
	- name: String
	- quantity: int
	- unit: String
	- calories: int
	{method} + ... constructor/getter/setter
	+ int sumCalories()
}
class UserController {
	- service: UserService
	+ UserController(UserService service)
	+ String login()
	+ String logout()
	+ String index(Model model)
	+ String registerUser()
	+ String registerUserPost(String username, String password, String repeat_password, String name, String male, String weight, String dob, String height, Model model)
	+ String displayWeek(Integer weekIndex, Principal principal, Model model)
	+ String pickRecipe(String weekday, String meal, Model model)
	+ String assignRecipeToDay(String weekday, String meal, Integer recipeId, Model model)
}
class UserService {
	- repository: UserRepository
	- encoder: PasswordEncoder
	+ UserService(UserRepository repository, PasswordEncoder encoder)
	+ void addUser(String username, String password, String name, boolean male, int weight, LocalDate dob, int height)
	+ User findUserByUsername(String username)
	+ void addDay(String username, LocalDate date, Recipe breakfast, Recipe lunch, Recipe dinner)
	+ void updateDay(String username, LocalDate date, Recipe breakfast, Recipe lunch, Recipe dinner)
	+ Day findDay(String username, LocalDate date)
	+ List<Day> findDaysOfWeek(String username, int weekIndex)
	+ Recipe findRecipeById(int id)
	+ List<Recipe> findRecipesForWeek(int weekIndex)
	+ List<LocalDate> calculateDatesOfNthWeek(int weekIndex)
	+ int calculateCurrentWeekIndex()
}
class UserRepository {
	- jdbc: JdbcTemplate
	+ UserRepository(JdbcTemplate jdbc)
	+ void addUser(User user)
	+ User findUserByUsername(String username)
	+ void addDay(Day day)
	+ void updateDay(Day day)
	+ Day findDay(String username, LocalDate date)
	+ Recipe findRecipeById(int id)
	+ List<Ingredient> findIngredientsForRecipe(int id)
	+ List<Recipe> findRecipesForWeek(int weekIndex)
}

UserController --- UserService
UserService --- UserRepository
User "1" --* "1" Role
Day "1" --* "3" Recipe
Recipe "1" --* "1..m" Ingredient
@enduml
